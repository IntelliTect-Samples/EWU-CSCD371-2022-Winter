<!--
Ty and Tony
cscd 371
3/10/2022
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>EWU Joke API</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="css/all.css">
    <link rel="stylesheet" href="css/site.css">
    <script src="https://kit.fontawesome.com/2be03f9c83.js" crossorigin="anonymous"></script>
</head>
<div class="EWU">
    <div class="Menu">
        <button class="MenuButton">
            Menu
            <i class="fa-solid fa-bars"></i>
        </button>
        <div id="menuDrop" class="MenuDrop">
            <!--The first button is the creative button-->
            <button onclick="creativeButt()">Find Miracle Max.</button>
            <button>Storm the Castle.</button>
            <button>Do Chores</button>
            <button>Become unmostly dead.</button>
        </div>
    </div>
    <h1>EWU</h1>
</div>
<div class="JokeHeader">
    <h1>The Joke Page</h1>
</div>
<div class="JokeCard">
    <div class="JokeCardContainer">
        <header>
            <h2>A Joke</h2>
        </header>
        <body>
            <p class="Joke"></p>
            <p class="Result"></p>
        </body>
        <footer>
            <button onclick="getJoke()">Another Joke</button>
            <a href="https://v2.jokeapi.dev/joke/Programming" target="Empty" class="JokeLinkButton">Joke API</a>
        </footer>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="js/index.js"></script>
    </body>





<script>
let dropButt = document.querySelector('.MenuButton');
let menuContent = document.querySelector('.MenuDrop');
    dropButt.addEventListener('click', () =>
    {
        if(menuContent.style.display === "")
    {
        menuContent.style.display="block";
    }
        else
        {
            menuContent.style.display = "";
        }
    }
)

function JokeResult()
{
   let ResultLocation = document.querySelector(".Result");
   ResultLocation.style.visibility = 'visible';
}

function getJoke()
{
    axios(
    {
      method: 'get',
      url: 'https://v2.jokeapi.dev/joke/Programming'
    }
    )
   .then(function (response)
    {
    let type = response.data.type;
    let placement = document.querySelector(".Joke");
    let ResultLocation = document.querySelector(".Result");
    ResultLocation.style.visibility = 'hidden'
    if(type.includes("single", 0) )
    {
        let joke = response.data.joke
        placement.innerText = joke;
    }
        else if (type.includes("twopart", 0))
        {
            let setup = response.data.setup;
            let delivery = response.data.delivery;
            placement.innerText = setup;
            let ResultLocation = document.querySelector(".Result");
            ResultLocation.style.visibility = 'hidden'
            ResultLocation.innerText = delivery;
            setTimeout(JokeResult, 4000);
        }
            else
            {
            placement.innerText = "try again in a few moments";
        }
    }
    )
    .catch(function (error)
    {
        console.log("error: try again in a few moments.");
    }
    );
}

window.onload = getJoke;

var count = 0;
//This should complete the turn a perfect 360 after 4 clicks
function creativeButt()
    {
       if (count == 0) {
        document.getElementsByTagName('body')[0].style.transform = 'rotate(69deg)';
       }
       else if (count == 1) {
        document.getElementsByTagName('body')[0].style.transform = 'rotate(90deg)';
       }
       else if (count == 2) {
        document.getElementsByTagName('body')[0].style.transform = 'rotate(180deg)';
       }
       //removed 270deg flip since the button sometimes will no longer be visible depending on your
       //browser window size
       else {
        document.getElementsByTagName('body')[0].style.transform = 'rotate(0deg)';
        count=-1;
       }
      clicked = false;
      count++;
    }
</script>








<style>
    body {
        margin: auto;
        height: 50%;
        width: 70%;
    }

    .EWU {
        text-indent: .5em;
        background-color: black;
        border: 1px solid black;
    }

        .EWU h1 {
            color: #A10022;
            margin: 0;
        }

    .JokeHeader {
        border-bottom: .1em solid lightgray;
        margin-bottom: .1em;
    }

    .Menu {
        position: relative;
        float: right;
        margin-top: 1em;
    }

    .MenuButton {
        background-color: black;
        color: white;
        border: none;
    }

    .MenuDrop button {
        background: linear-gradient(90deg, rgb(14, 141, 190) 25%,rgb(143, 22, 180) 100%);
        color: white;
        display: block;
        min-width: 100%;
        margin-top: .3em;
        margin-bottom: .3em;
    }

    .MenuDrop {
        border: solid .01em black;
        background: white;
        min-width: 300%;
        position: absolute;
        overflow: auto;
        display: none;
        padding: .5em;
        right: 0;
    }

        .MenuDrop button:hover {
            background: linear-gradient(45deg, pink, orange);
        }

    .MenuDrop-show {
        display: block;
    }

    .JokeCard {
        box-shadow: 0 4px 8px 0 black;
        border: solid .05em black;
        border-radius: 10px;
        width: 100%;
        transition: .5s;
    }

        .JokeCard:hover {
            box-shadow: 0 8px 16px 0 black;
        }

    .JokeCardContainer header {
        background-color: lightgray;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
    }

    .JokeCardContainer {
        text-indent: .5em;
    }

        .JokeCardContainer h2 {
            margin: 1px;
        }

        .JokeCardContainer footer {
            border-top: solid 0.1em lightgray;
            margin-bottom: .5em;
        }

        .JokeCardContainer button {
            background: linear-gradient(90deg, rgb(2, 145, 133) 25%,rgb(73, 110, 230) 100%);
            color: white;
            margin-top: .3em;
        }

            .JokeCardContainer button:hover {
                background: linear-gradient(45deg, yellow, green);
            }

    .JokeLinkButton {
        background-color: lightgray;
        border: 2px solid black;
        color: black;
        padding: 2px 6px 2px 6px;
        border-radius: 5px;
        margin-top: .3em;
        text-decoration: none;
    }

        .JokeLinkButton:hover {
            background-color: red;
            color: blue;
        }
</style>
</html>